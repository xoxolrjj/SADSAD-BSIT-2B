library(rvest)
library(polite)
library(httr)
library(dplyr)
phanthomthread_url<-'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv'
for(url in phanthomthread_url){
page <- read_html(url)
phanthomthread_names<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthred_df<-data.frame(
Name=phanthomthread_names[1:25],
Date=phanthomthread_dates[1:25],
User_Rating=phanthomthread_ratings[1:25],
ContentReview=phanthomthread_contentReviews[1:25],
Review = phanthomthread_reviews[1:25]
)
}
phanthomthread_url6<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjtrdumsab53qkdx7xka3ap4u3hoq366ss7oq3fjmrndb4k4nfwahglutgs7qashqqmk4lo5gi'
for(url in phanthomthread_url6){
page <- read_html(url)
phanthomthread_names6<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates6<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings6<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews6<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews6<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df6<-data.frame(
Name=phanthomthread_names6[1:25],
Date=phanthomthread_dates6[1:25],
User_Rating=phanthomthread_ratings6[1:25],
Reviews=phanthomthread_reviews6[1:25]
)
}
phanthomthread_url8<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrwqlrmsaj43aktx4peb3dpeutcoq366ss5oqyfxnjpdb4k5p5gerkiyfmxpierahjkb7wvnea'
for(url in phanthomthread_url8){
page <- read_html(url)
phanthomthread_names8<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates8<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings8<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews8<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews8<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df8<-data.frame(
Name=phanthomthread_names8[1:25],
Date=phanthomthread_dates8[1:25],
User_Rating=phanthomthread_ratings8[1:25],
Reviews=phanthomthread_reviews8[1:25]
)
}
phanthomthread_url8<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrwqlrmsaj43aktx4peb3dpeutcoq366ss5oqyfxnjpdb4k5p5gerkiyfmxpierahjkb7wvnea'
for(url in phanthomthread_url8){
page <- read_html(url)
phanthomthread_names8<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates8<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings8<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews8<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews8<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df8<-data.frame(
Name=phanthomthread_names8[1:25],
Date=phanthomthread_dates8[1:25],
User_Rating=phanthomthread_ratings8[1:25],
Reviews=phanthomthread_reviews8[1:25]
)
}
phanthomthread_url<-'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv'
for(url in phanthomthread_url){
page <- read_html(url)
phanthomthread_names<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthred_df<-data.frame(
Name=phanthomthread_names[1:25],
Date=phanthomthread_dates[1:25],
User_Rating=phanthomthread_ratings[1:25],
Content_Review=phanthomthread_contentReviews[1:25],
Review = phanthomthread_reviews[1:25]
)
}
phanthomthread_url<-'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv'
for(url in phanthomthread_url){
page <- read_html(url)
phanthomthread_names<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthred_df<-data.frame(
Name=phanthomthread_names[1:25],
Date=phanthomthread_dates[1:25],
User_Rating=phanthomthread_ratings[1:25],
Content_Review=phanthomthread_contentReviews[1:25],
Review = phanthomthread_reviews[1:25]
)
}
phanthomthread_url2<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbzr3smmarz3untz77ja7e76ul5pjt6uck3oy2flmbkb4drqe7eauirauwzu6tuj5e66m7w4'
for(url in phanthomthread_url2){
page <- read_html(url)
phanthomthread_names2<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates2<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings2<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews2<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews2<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df2<-data.frame(
Name=phanthomthread_names2[1:25],
Date=phanthomthread_dates2[1:25],
User_Rating=phanthomthread_ratings2[1:25],
Content_Review=phanthomthread_contentReviews2[1:25],
Reviews=phanthomthread_reviews2[1:25]
)
}
phanthomthread_url3<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbqr3t4ycjt3qntr67oa3cpswt5pjt6uck3oqyvzpzmb4dv45p2bxrmnmi7cck7irr2f6g7a'
for(url in phanthomthread_url3){
page <- read_html(url)
phanthomthread_names3<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates3<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings3<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews3<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews3<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df3<-data.frame(
Name=phanthomthread_names3[1:25],
Date=phanthomthread_dates3[1:25],
User_Rating=phanthomthread_ratings3[1:25],
Content_Review=phanthomthread_contentReviews3[1:25],
Reviews=phanthomthread_reviews3[1:25]
)
}
scrapeReviews <- function(url) {
movieReviews <- read_html(url)
#title
movieReviews %>%
html_nodes('.title') %>%
html_text() -> title
#username
movieReviews %>%
html_nodes('.display-name-link') %>%
html_text() -> username
#content
movieReviews %>%
html_nodes('.content') %>%
html_text() -> content
#date
movieReviews %>%
html_nodes('.review-date') %>%
html_text() -> date
#stars
movieReviews %>%
html_nodes('.rating-other-user-rating') %>%
html_text() -> stars
cat("Title: ", length(title), "\n")
cat("Username: ", length(username), "\n")
cat("Content: ", length(content), "\n")
cat("Date: ", length(date), "\n")
cat("Stars: ", length(stars), "\n")
#cat("Metascore: ", length(metascore),"\n")
minLength<- min(length(title), length(username), length(content), length(date), length(stars))
movieReviews1 <- data.frame (
Title = title[1:minLength],
Username = username[1:minLength],
Content = content[1:minLength],
Date = date[1:minLength],
Stars = stars[1:minLength],
stringsAsFactors = FALSE
)
View(movieReviews1)
return(movieReviews1)
}
url1 <- 'https://www.imdb.com/title/tt0120338/reviews?ref_=tt_urv'
target_reviews <- 300
movieReview <- data.frame()
page <- 1
while (nrow(movieReview) < target_reviews) {
url <- paste0(url1, page)
reviewsPage <- scrapeReviews(url)
movieReview <- bind_rows(movieReview, reviewsPage)
page <- page + 1
}
url1 <- 'https://www.imdb.com/title/tt0120338/reviews?ref_=tt_urv'
target_reviews <- 300
movieReview <- data.frame()
page <- 1
while (nrow(movieReview) < target_reviews) {
url <- paste0(url1, page)
reviewsPage <- scrapeReviews(url)
movieReview <- bind_rows(movieReview, reviewsPage)
page <- page + 1
}
scrapeReviews <- function(url) {
movieReviews <- read_html(url)
#title
movieReviews %>%
html_nodes('.title') %>%
html_text() -> title
#username
movieReviews %>%
html_nodes('.display-name-link') %>%
html_text() -> username
#content
movieReviews %>%
html_nodes('.content') %>%
html_text() -> content
#date
movieReviews %>%
html_nodes('.review-date') %>%
html_text() -> date
#stars
movieReviews %>%
html_nodes('.rating-other-user-rating') %>%
html_text() -> stars
cat("Title: ", length(title), "\n")
cat("Username: ", length(username), "\n")
cat("Content: ", length(content), "\n")
cat("Date: ", length(date), "\n")
cat("Stars: ", length(stars), "\n")
#cat("Metascore: ", length(metascore),"\n")
minLength<- min(length(title), length(username), length(content), length(date), length(stars))
movieReviews1 <- data.frame (
Title = title[1:minLength],
Username = username[1:minLength],
Content = content[1:minLength],
Date = date[1:minLength],
Stars = stars[1:minLength],
stringsAsFactors = FALSE
)
View(movieReviews1)
return(movieReviews1)
}
url1 <- 'https://www.imdb.com/title/tt0120338/reviews?ref_=tt_urv'
target_reviews <- 300
movieReview <- data.frame()
page <- 1
while (nrow(movieReview) < target_reviews) {
url <- paste0(url1, page)
reviewsPage <- scrapeReviews(url)
movieReview <- bind_rows(movieReview, reviewsPage)
page <- page + 1
}
phanthomthread_url3<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbqr3t4ycjt3qntr67oa3cpswt5pjt6uck3oqyvzpzmb4dv45p2bxrmnmi7cck7irr2f6g7a'
for(url in phanthomthread_url3){
page <- read_html(url)
phanthomthread_names3<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates3<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings3<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews3<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews3<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df3<-data.frame(
Name=phanthomthread_names3[1:25],
Date=phanthomthread_dates3[1:25],
User_Rating=phanthomthread_ratings3[1:25],
Content_Review=phanthomthread_contentReviews3[1:25],
Reviews=phanthomthread_reviews3[1:25]
)
}
View(movieReview)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(polite)
library(dplyr)
phanthomthread_url<-'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv'
for(url in phanthomthread_url){
page <- read_html(url)
phanthomthread_names<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthred_df<-data.frame(
Name=phanthomthread_names[1:25],
Date=phanthomthread_dates[1:25],
User_Rating=phanthomthread_ratings[1:25],
Content_Review=phanthomthread_contentReviews[1:25],
Review = phanthomthread_reviews[1:25]
)
}
phanthomthread_url2<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbzr3smmarz3untz77ja7e76ul5pjt6uck3oy2flmbkb4drqe7eauirauwzu6tuj5e66m7w4'
for(url in phanthomthread_url2){
page <- read_html(url)
phanthomthread_names2<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates2<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings2<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews2<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews2<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df2<-data.frame(
Name=phanthomthread_names2[1:25],
Date=phanthomthread_dates2[1:25],
User_Rating=phanthomthread_ratings2[1:25],
Content_Review=phanthomthread_contentReviews2[1:25],
Reviews=phanthomthread_reviews2[1:25]
)
}
phanthomthread_url2<-'https://www.imdb.com/title/tt5776858/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbzr3smmarz3untz77ja7e76ul5pjt6uck3oy2flmbkb4drqe7eauirauwzu6tuj5e66m7w4'
for(url in phanthomthread_url2){
page <- read_html(url)
phanthomthread_names2<-page %>% html_nodes(".display-name-link") %>% html_text()
phanthomthread_dates2<-page %>% html_nodes("span.review-date") %>% html_text()
phanthomthread_ratings2<-page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
phanthomthread_contentReviews2<-page%>% html_nodes("a.title")%>%html_text()
phanthomthread_reviews2<-page%>% html_nodes(".text.show-more__control")%>%html_text()
phanthomthread_df2<-data.frame(
Name=phanthomthread_names2[1:25],
Date=phanthomthread_dates2[1:25],
User_Rating=phanthomthread_ratings2[1:25],
Content_Review=phanthomthread_contentReviews2[1:25],
Reviews=phanthomthread_reviews2[1:25]
)
}
View(movieReview)
library(rvest)
library(dplyr)
library(rvest)
library(dplyr)
scrape_reviews <- function(url) {
page <- read_html(url)
names <- page %>% html_nodes(".display-name-link") %>% html_text()
dates <- page %>% html_nodes("span.review-date") %>% html_text()
ratings <- page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
content_reviews <- page %>% html_nodes("a.title") %>% html_text()
reviews <- page %>% html_nodes(".text.show-more__control") %>% html_text()
data.frame(
Name = names[1:25],
Date = dates[1:25],
User_Rating = ratings[1:25],
Content_Review = content_reviews[1:25],
Reviews = reviews[1:25]
)
}
urls <- c(
'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbzr3smmarz3untz77ja7e76ul5pjt6uck3oy2flmbkb4drqe7eauirauwzu6tuj5e66m7w4',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbqr3t4ycjt3qntr67oa3cpswt5pjt6uck3oqyvzpzmb4dv45p2bxrmnmi7cck7irr2f6g7a',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjzqpsmscb23uodz77mahe7yud5pjt6uck3ouzvvmrmb4drw6hpzzfztpbb4iikbixebuuee',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjvrtrmmbr43qmtd4pna3cp6wtgoq366ss7oazflmzndz4k5epqjcoyl7vktfdwv2nu33yen3a',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjtrdumsab53qkdx7xka3ap4u3hoq366ss7oq3fjmrndb4k4nfwahglutgs7qashqqmk4lo5gi',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmryqlrmscj52mkdd4pkapb7uv35pjt6uck3ou3f5mrkb4dtpvhsngxfge7gellu7f2exsvvi',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrwqlrmsaj43aktx4peb3dpeutcoq366ss5oqyfxnjpdb4k5p5gerkiyfmxpierahjkb7wvnea',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmruqpsmoaby2indz77jb3dpsulfoq366ss6oe3frnbcdv4k4vh4rilnktlx4nqyxqrtxc2y5jy',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrvrdu44az73upd367katbp6wt5pjt6uck3om3fvmbkb4dzdbxuphe3kofhxbq4byufobvvw',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrtrdumsab53qkdx7xka3ap4ud5pjt6uck6o4yf7mzpb4dzucrujymlaha7bzj4gyc7ukaas',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrrqlqm6cby3imdr6xiatapetttfjrksdc7ou2fjnjyobsrabk2zuop4qoyow2bxy7txfja'
)
all_reviews <- lapply(urls, scrape_reviews)
View(all_reviews)
View(reviewsPage)
View(phanthomthred_df)
library(rvest)
library(dplyr)
scrape_reviews <- function(url) {
page <- read_html(url)
names <- page %>% html_nodes(".display-name-link") %>% html_text()
dates <- page %>% html_nodes("span.review-date") %>% html_text()
ratings <- page %>% html_nodes("span.rating-other-user-rating") %>% html_text()
content_reviews <- page %>% html_nodes("a.title") %>% html_text()
reviews <- page %>% html_nodes(".text.show-more__control") %>% html_text()
data.frame(
Name = names[1:25],
Date = dates[1:25],
User_Rating = ratings[1:25],
Content_Review = content_reviews[1:25],
Reviews = reviews[1:25]
)
}
urls <- c(
'https://www.imdb.com/title/tt5776858/reviews?ref_=tt_urv',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbzr3smmarz3untz77ja7e76ul5pjt6uck3oy2flmbkb4drqe7eauirauwzu6tuj5e66m7w4',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnbqr3t4ycjt3qntr67oa3cpswt5pjt6uck3oqyvzpzmb4dv45p2bxrmnmi7cck7irr2f6g7a',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjzqpsmscb23uodz77mahe7yud5pjt6uck3ouzvvmrmb4drw6hpzzfztpbb4iikbixebuuee',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjvrtrmmbr43qmtd4pna3cp6wtgoq366ss7oazflmzndz4k5epqjcoyl7vktfdwv2nu33yen3a',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjnjtrdumsab53qkdx7xka3ap4u3hoq366ss7oq3fjmrndb4k4nfwahglutgs7qashqqmk4lo5gi',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmryqlrmscj52mkdd4pkapb7uv35pjt6uck3ou3f5mrkb4dtpvhsngxfge7gellu7f2exsvvi',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrwqlrmsaj43aktx4peb3dpeutcoq366ss5oqyfxnjpdb4k5p5gerkiyfmxpierahjkb7wvnea',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmruqpsmoaby2indz77jb3dpsulfoq366ss6oe3frnbcdv4k4vh4rilnktlx4nqyxqrtxc2y5jy',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrvrdu44az73upd367katbp6wt5pjt6uck3om3fvmbkb4dzdbxuphe3kofhxbq4byufobvvw',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrtrdumsab53qkdx7xka3ap4ud5pjt6uck6o4yf7mzpb4dzucrujymlaha7bzj4gyc7ukaas',
'https://www.imdb.com/title/tt5776858/reviews/_ajax?&paginationKey=g4w6ddbmqyzdo6ic4oxwjmrrqlqm6cby3imdr6xiatapetttfjrksdc7ou2fjnjyobsrabk2zuop4qoyow2bxy7txfja'
)
all_reviews <- lapply(urls, scrape_reviews)
final_all_reviews <- do.call(rbind, all_reviews)
View(final_all_reviews)
